#! /usr/bin/env ruby

require 'yaml'
require 'ppy'

# This first argument should always be the file to parse.
file = ARGV.first

abort 'No file argument provided.' if file.nil?
abort 'File does not exist.' unless File.exists?(file)
abort 'Directory provided, provide a file path instead.' if File.directory?(file)

yaml = YAML.load_file(file)

# If the vine gem is installed, only output a nested value if one has been
# provided as the second argument.
unless ARGV[1].nil?
  yaml = yaml.nested_access(ARGV[1])
end

PrettyYaml.print(yaml)
